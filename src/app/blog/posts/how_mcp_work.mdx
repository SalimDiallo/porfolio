---
title: "Le Model Context Protocol (MCP) : Connectez vos outils √† l'IA"
publishedAt: "2025-10-25"
image: "/images/blog/mcp-cover.png"
summary: "D√©couvrez MCP, le standard qui permet de connecter facilement vos outils et donn√©es avec Claude et d'autres mod√®les IA."
tag: "IA & D√©veloppement"
---

## Qu'est-ce que le Model Context Protocol ?

Le **Model Context Protocol (MCP)** est un protocole ouvert cr√©√© par Anthropic qui standardise la communication entre les applications et les mod√®les d'IA comme Claude. 

Pensez √† MCP comme un **USB pour l'IA** : au lieu de cr√©er une int√©gration personnalis√©e pour chaque outil, vous utilisez un standard universel.

### Pourquoi MCP ?

Avant MCP :
- Connecter une base de donn√©es ‚Üí code personnalis√©
- Int√©grer un CRM ‚Üí encore du code personnalis√©
- Ajouter un nouvel outil ‚Üí recommencer √† z√©ro

Avec MCP :
- Un seul standard pour tout
- Int√©grations r√©utilisables
- Partage facile avec la communaut√©

## Architecture simple

MCP utilise une architecture client-serveur :

- **Client MCP** : Claude Desktop ou votre application
- **Serveur MCP** : Votre service qui expose des outils ou des donn√©es
- **Protocole** : La couche de communication JSON-RPC

```json
{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "params": {
    "name": "get_user_data",
    "arguments": {
      "user_id": "12345"
    }
  }
}
```

## Cr√©er votre premier serveur MCP en Python

Voici un serveur MCP simple pour g√©rer des t√¢ches :

```python
from mcp.server import Server
from mcp.server.stdio import stdio_server
from mcp.types import Tool, TextContent

# Stockage des t√¢ches en m√©moire
tasks = {}

# Cr√©er le serveur
app = Server("task-manager")

@app.list_tools()
async def list_tools() -> list[Tool]:
    """Liste des outils disponibles"""
    return [
        Tool(
            name="add_task",
            description="Ajouter une nouvelle t√¢che",
            inputSchema={
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string",
                        "description": "Le titre de la t√¢che"
                    },
                    "priority": {
                        "type": "string",
                        "enum": ["low", "medium", "high"],
                        "description": "La priorit√©"
                    }
                },
                "required": ["title"]
            }
        ),
        Tool(
            name="list_tasks",
            description="Lister toutes les t√¢ches",
            inputSchema={
                "type": "object",
                "properties": {}
            }
        )
    ]

@app.call_tool()
async def call_tool(name: str, arguments: dict) -> list[TextContent]:
    """G√©rer les appels d'outils"""
    
    if name == "add_task":
        import time
        task_id = str(int(time.time()))
        
        task = {
            "id": task_id,
            "title": arguments["title"],
            "priority": arguments.get("priority", "medium"),
            "completed": False
        }
        
        tasks[task_id] = task
        
        return [TextContent(
            type="text",
            text=f"T√¢che cr√©√©e : {task}"
        )]
    
    elif name == "list_tasks":
        task_list = list(tasks.values())
        return [TextContent(
            type="text",
            text=f"T√¢ches ({len(task_list)}) : {task_list}"
        )]
    
    raise ValueError(f"Outil inconnu : {name}")

# D√©marrer le serveur
if __name__ == "__main__":
    import asyncio
    asyncio.run(stdio_server(app))
```

## Configuration avec Claude Desktop

Ajoutez cette configuration dans votre fichier Claude Desktop :

```json
{
  "mcpServers": {
    "task-manager": {
      "command": "python",
      "args": ["/chemin/vers/votre/server.py"]
    }
  }
}
```

## Serveur avec ressources (fichiers)

Les serveurs MCP peuvent aussi exposer des fichiers :

```python
from mcp.server import Server
from mcp.types import Resource, TextContent
import os

app = Server("documentation-server")

DOCS_DIR = "./docs"

@app.list_resources()
async def list_resources() -> list[Resource]:
    """Liste des fichiers disponibles"""
    files = os.listdir(DOCS_DIR)
    
    return [
        Resource(
            uri=f"file://{os.path.join(DOCS_DIR, file)}",
            name=file,
            mimeType="text/plain",
            description=f"Documentation : {file}"
        )
        for file in files
    ]

@app.read_resource()
async def read_resource(uri: str) -> str:
    """Lire un fichier sp√©cifique"""
    file_path = uri.replace("file://", "")
    
    with open(file_path, "r", encoding="utf-8") as f:
        content = f.read()
    
    return content
```

## Cas d'usage pratiques

### 1. Int√©gration avec SQLite

```python
import sqlite3

@app.call_tool()
async def call_tool(name: str, arguments: dict):
    if name == "query_database":
        conn = sqlite3.connect("database.db")
        cursor = conn.cursor()
        
        try:
            cursor.execute(arguments["query"])
            results = cursor.fetchall()
            
            return [TextContent(
                type="text",
                text=f"R√©sultats : {results}"
            )]
        finally:
            conn.close()
```

### 2. Connexion √† l'API GitHub

```python
import os
import requests

@app.call_tool()
async def call_tool(name: str, arguments: dict):
    if name == "create_github_issue":
        url = f"https://api.github.com/repos/{arguments['owner']}/{arguments['repo']}/issues"
        
        headers = {
            "Authorization": f"token {os.getenv('GITHUB_TOKEN')}",
            "Content-Type": "application/json"
        }
        
        data = {
            "title": arguments["title"],
            "body": arguments.get("description", ""),
            "labels": arguments.get("labels", [])
        }
        
        response = requests.post(url, headers=headers, json=data)
        issue = response.json()
        
        return [TextContent(
            type="text",
            text=f"Issue cr√©√©e : {issue['html_url']}"
        )]
```

## Bonnes pratiques

### Gestion des erreurs

```python
@app.call_tool()
async def call_tool(name: str, arguments: dict):
    try:
        # Validation
        if "required_field" not in arguments:
            raise ValueError("Le champ 'required_field' est obligatoire")
        
        # Traitement
        result = perform_operation(arguments)
        
        return [TextContent(type="text", text=str(result))]
        
    except Exception as e:
        return [TextContent(
            type="text",
            text=f"Erreur : {str(e)}"
        )]
```

### Logging

```python
import logging
from datetime import datetime

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

@app.call_tool()
async def call_tool(name: str, arguments: dict):
    start_time = datetime.now()
    logger.info(f"Appel : {name}")
    
    try:
        result = handle_tool(name, arguments)
        duration = (datetime.now() - start_time).total_seconds()
        logger.info(f"Succ√®s en {duration}s")
        return result
        
    except Exception as e:
        duration = (datetime.now() - start_time).total_seconds()
        logger.error(f"Erreur apr√®s {duration}s: {e}")
        raise
```

## Installation rapide

```bash
# Installer le SDK MCP pour Python
pip install mcp

# Cr√©er votre projet
mkdir mon-serveur-mcp
cd mon-serveur-mcp

# Cr√©er votre serveur
touch server.py
```

## Ressources utiles

- **Documentation officielle** : [modelcontextprotocol.io](https://modelcontextprotocol.io)
- **SDK Python** : [PyPI - mcp](https://pypi.org/project/mcp/)
- **Exemples** : Explorez les serveurs de la communaut√©
- **Claude Desktop** : Testez vos serveurs directement

## Conclusion

MCP simplifie l'int√©gration entre vos outils et l'IA. Avec Python, vous pouvez cr√©er rapidement des serveurs pour :

- Connecter vos bases de donn√©es
- Int√©grer vos APIs
- Exposer vos fichiers et donn√©es
- Automatiser vos workflows

Commencez avec un serveur simple, puis ajoutez des fonctionnalit√©s au fur et √† mesure. L'√©cosyst√®me MCP est en pleine croissance !

**Bon d√©veloppement !** üöÄ